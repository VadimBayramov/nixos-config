{ config, pkgs, ... }:

{
  imports = [
    # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –¥–ª—è HP Pavilion ‚Äî —É–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∂–µ–ª–µ–∑–∞ (–≤–æ–∑–º–æ–∂–Ω–æ, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, —ç–∫—Ä–∞–Ω, —Ç–∞—á–ø–∞–¥ –∏ —Ç.–¥.)
    "${pkgs.path}/nixos/modules/installer/tools/nixos-hardware/hp-pavilion"
  ];

  # === –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ ===

  services.xserver.enable = true;       # –í–∫–ª—é—á–∞–µ–º X —Å–µ—Ä–≤–µ—Ä (–Ω—É–∂–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π —Å—Ä–µ–¥—ã)
  services.xserver = {
  layout = "us,ru";                     # –î–æ–±–∞–≤–ª—è–µ–º —Å—Ä–∞–∑—É –¥–≤–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏: –∞–Ω–≥–ª–∏–π—Å–∫–∞—è –∏ —Ä—É—Å—Å–∫–∞—è
  xkbOptions = "grp:alt_shift_toggle";  # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–æ–∫ –ø–æ Alt+Shift
};

  programs.hyprland.enable = true;      # –í–∫–ª—é—á–∞–µ–º Hyprland ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä –¥–ª—è Wayland

  # === –î—Ä–∞–π–≤–µ—Ä –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã NVIDIA ===

  services.xserver.videoDrivers = [ "nvidia" ];        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä NVIDIA
  hardware.opengl.enable = true;                       # –í–∫–ª—é—á–∞–µ–º OpenGL (–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫)
  hardware.nvidia.modesetting.enable = true;           # –í–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —è–¥—Ä–∞ (kernel modesetting) ‚Äî –Ω—É–∂–µ–Ω –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ Hyprland
  hardware.nvidia.prime.offload.enable = true;         # –í–∫–ª—é—á–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∏ –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–æ–π (–µ—Å–ª–∏ –µ—Å—Ç—å Optimus)

  # === –ó–≤—É–∫ ===

  sound.enable = true;                 # –í–∫–ª—é—á–∞–µ–º –±–∞–∑–æ–≤—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∑–≤—É–∫–∞ –≤ NixOS

  # –£—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–ø–æ—Å–æ–± –≤–∫–ª—é—á–µ–Ω–∏—è PipeWire ‚Äî —É–¥–∞–ª–∏ —ç—Ç–æ:
  # services.pipewire.enable = true;
  # services.pipewire.pulse.enable = true;
  # services.pipewire.media-session.enable = true;

  # –ù–æ–≤—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –Ω–∏–∂–µ üëá

  # –£–ª—É—á—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É –∑–≤—É–∫–∞ —Å –Ω–∏–∑–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π ‚Äî –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è FL Studio, VST, MIDI –∏ —Ç.–¥.
  security.rtkit.enable = true;

  # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PipeWire ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∑–≤—É–∫–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä, –∑–∞–º–µ–Ω–∞ PulseAudio –∏ JACK
  services.pipewire = {
    enable = true;               # –í–∫–ª—é—á–∞–µ—Ç PipeWire
    alsa.enable = true;         # –í–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É ALSA (–∑–≤—É–∫–æ–≤—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
    alsa.support32Bit = true;   # –ù—É–∂–µ–Ω –¥–ª—è 32-–±–∏—Ç–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ä—ã–µ –ø–ª–∞–≥–∏–Ω—ã VST —á–µ—Ä–µ–∑ Wine)
    pulse.enable = true;        # PipeWire —ç–º—É–ª–∏—Ä—É–µ—Ç PulseAudio ‚Äî —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏
  };

  # === –°–µ—Ç—å ===

  networking.firewall.enable = false;   # –í—ã–∫–ª—é—á–∞–µ–º —Ñ–∞–µ—Ä–≤–æ–ª (–¥–ª—è –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏, –µ—Å–ª–∏ —Å–∞–º –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—à—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
}
